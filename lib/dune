(library
 (name staged_synth)
 ; (modes byte)
 (libraries core combinat utils ocamlgraph delimcc fmt hashcons)
 (preprocess (pps ppx_sexp_conv ppx_compare ppx_hash ppx_expect ppx_assert ppx_let ppx_variants_conv ppx_deriving.show))
 (inline_tests (modes byte))
 (flags -g -open Core))

(copy_files ../etc/{*.cpp,*.hpp})

(alias
 (name runtest)
 (deps (glob_files *.cpp) (glob_files *.hpp)))

