(library
 (name staged_synth)
 (libraries core combinat utils ocamlgraph delimcc fmt hashcons landmarks)
 (preprocess (pps ppx_sexp_conv ppx_compare ppx_hash ppx_expect ppx_assert ppx_let ppx_variants_conv ppx_deriving.show landmarks.ppx ppx_here ppx_sexp_message))
 (inline_tests (modes byte))
 (flags :standard -g -open Core -w -9))

(copy_files ../etc/{*.cpp,*.hpp})

(alias
 (name runtest)
 (deps (glob_files *.cpp) (glob_files *.hpp)))

